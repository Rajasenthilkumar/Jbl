import{j as e,cA as w,aQ as O,aR as S,aS as N,r as d,aT as H,aF as G,am as b,cx as _,an as L,cz as M,a0 as T,a1 as q,a2 as g,a5 as v,a7 as j,B as D,x as k,cC as A,cD as U,t as $,b4 as z,cK as B}from"./index-BD9lYu5U.js";import{G as C}from"./GuestLoginIcon-BGeocUGB.js";import{M as V}from"./MailIcon-2Ggx5cXu.js";const W=""+new URL("email-sent-0XRUlKLr.svg",import.meta.url).href,y=({email:a,idNumber:t})=>e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:W,alt:"verify-image"}),e.jsx("h2",{className:"mb-5 text-3xl font-bold text-PrimaryText",children:"Email sent"}),e.jsxs("p",{className:"mb-4 text-base text-center text-Grey",children:["A password reset link has been sent to ",a,t&&e.jsxs("span",{children:[" (ID: ",t,")"]})]})]})});var f={exports:{}},m={},p={};Object.defineProperty(p,"__esModule",{value:!0});var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};p.default=K;var Q=O.default,x=S.default;Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;var X=x(N),E=Q(d),Y=x(p),J=x(H),Z=function(t,r){return E.createElement(J.default,(0,X.default)({},t,{ref:r,icon:Y.default}))},ee=E.forwardRef(Z);m.default=ee;(function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=o(m);function o(s){return s&&s.__esModule?s:{default:s}}const n=r;t.default=n,a.exports=n})(f,f.exports);var te=f.exports;const se=G(te),ae=b({mode:_("Host"),email:L().min(1,{message:"Email is required"}).email({message:"Invalid email address"})}),re=b({mode:_("Guest"),id_number:L().min(1,{message:"Identification Number is required"})}),oe=M("mode",[ae,re]),ne=({onFinish:a,mode:t="Host",isSubmitting:r})=>{const{control:o,handleSubmit:n,setValue:s}=T({defaultValues:{email:"",id_number:"",mode:t},resolver:q(oe)});return d.useEffect(()=>{s("mode",t||"Host"),s(t==="Host"?"email":"id_number","")},[t,s]),e.jsxs(w,{title:"Forgot Your Password?",subTitle:t==="Host"?"Enter the email address associated with your account and weâ€™ll email you a link to reset your password.":"We'll help you reset it and get back on track",children:[e.jsx(g,{id:"forgot-password-form",onFinish:n(c=>{a(c)}),children:e.jsxs("div",{className:"flex flex-col gap-1",children:[t==="Host"?e.jsx(v,{control:o,name:"email",children:e.jsx(j,{prefix:e.jsx(V,{}),placeholder:"Email",size:"large",variant:"filled",className:"py-3",id:"email"})}):e.jsx(v,{control:o,name:"id_number",children:e.jsx(j,{prefix:e.jsx(C,{}),placeholder:"Identification Number",size:"large",variant:"filled",className:"py-3",id:"id_number"})}),e.jsx(g.Item,{children:e.jsx(D,{type:"primary",htmlType:"submit",size:"large",className:"w-full py-6 mt-2 font-bold",loading:r,id:"forgot-password-button",children:"Send reset link"})})]})}),e.jsx("p",{className:"flex items-center w-full gap-2 mt-16 text-center text-PrimaryText",id:"login-link",children:e.jsxs(k,{to:"/login",className:"w-full",children:[" ",e.jsx(se,{})," Return to login"]})})]})},ie=()=>{const{loading:a,error:t,success:r,handleRequest:o}=A(U.post);return{loading:a,error:t,success:r,forgetPassword:async s=>{const c=s.mode==="Host"?"/api/host/forgot-password":"/api/guest/forgot-password";return await o(c,s)}}},le=()=>{const{forgetPassword:a,success:t,loading:r}=ie(),[o,n]=d.useState(""),[s,c]=d.useState(""),[i,F]=d.useState(void 0),P=$(),l=new URLSearchParams(P.search).get("mode");d.useEffect(()=>{l==="Host"||l==="Guest"?F(l):l&&console.warn(`Unexpected mode value from URL: ${l}`)},[l]);const R=async I=>{if(!i){console.warn("Mode is undefined. Please specify 'Host' or 'Guest'.");return}try{const u={...I,mode:i},h=await a(u);h?.data?.result?.email&&n(h.data.result.email),i==="Guest"&&u.id_number&&c(u.id_number)}catch(u){z(u)}};return t?i==="Guest"?e.jsx(y,{email:o,idNumber:s}):e.jsx(y,{email:o}):e.jsx("div",{children:e.jsx(ne,{onFinish:R,isSubmitting:r,mode:i})})},fe=()=>e.jsx(B,{children:e.jsx(le,{})});export{fe as default};
